# ğŸš€ SMOTA ä¸Šä½æœºå¼€å‘è·¯çº¿å›¾ (Tauri + Rust + Vue 3)

æœ¬æ–‡æ¡£æŒ‡å¯¼å¼€å‘ä¸€æ¬¾æ”¯æŒ SMOTA åè®®çš„ä¸“ä¸šä¸²å£è°ƒè¯•ä¸ OTA å‡çº§å·¥å…·ã€‚

---

## ğŸ“‹ ç›®å½•

1. [å¼€å‘ç¯å¢ƒé…ç½®](#ç¬¬ä¸€é˜¶æ®µå¼€å‘ç¯å¢ƒé…ç½®)
2. [é¡¹ç›®åˆå§‹åŒ–](#ç¬¬äºŒé˜¶æ®µé¡¹ç›®åˆå§‹åŒ–)
3. [Rust åç«¯é€»è¾‘](#ç¬¬ä¸‰é˜¶æ®µrust-åç«¯é€»è¾‘)
4. [å‰ç«¯ UI è®¾è®¡](#ç¬¬å››é˜¶æ®µå‰ç«¯-ui-è®¾è®¡)
5. [Python è„šæœ¬é›†æˆ](#ç¬¬äº”é˜¶æ®µpython-è„šæœ¬é›†æˆ)
6. [SMOTA åè®®é›†æˆ](#ç¬¬å…­é˜¶æ®µsmota-åè®®é›†æˆ)
7. [æ‰“åŒ…ä¸å‘å¸ƒ](#ç¬¬ä¸ƒé˜¶æ®µæ‰“åŒ…ä¸å‘å¸ƒ)
8. [å¼€å‘å»ºè®®](#å¼€å‘å»ºè®®-best-practices)

---

## ğŸ—ï¸ ç¬¬ä¸€é˜¶æ®µï¼šå¼€å‘ç¯å¢ƒé…ç½®

ç¡®ä¿ Windows å¼€å‘ç¯å¢ƒå…·å¤‡åº•å±‚ç¼–è¯‘èƒ½åŠ›ã€‚

### 1. å®‰è£… Rust å·¥å…·é“¾
- å‰å¾€ [rustup.rs](https://rustup.rs/) ä¸‹è½½å¹¶è¿è¡Œ `rustup-init.exe`
- å®‰è£…å®Œæˆåè¿è¡Œ `rustc --version` éªŒè¯

### 2. å®‰è£… Node.js
- å»ºè®®ç‰ˆæœ¬ `v18+`
- æ¨èä½¿ç”¨ [pnpm](https://pnpm.io/) ä½œä¸ºåŒ…ç®¡ç†å™¨

### 3. å®‰è£… Visual Studio C++ ç”Ÿæˆå·¥å…·
- ä¸‹è½½ [Visual Studio Installer](https://visualstudio.microsoft.com/zh-hans/downloads/)
- é€‰æ‹© **"ä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘"** å·¥ä½œè´Ÿè½½
- ç¡®è®¤å‹¾é€‰ï¼š`MSVC v143` å’Œ `Windows 10/11 SDK`

> **ä½œç”¨**ï¼šRust éœ€è¦å®ƒæ¥é“¾æ¥ Windows ç³»ç»Ÿ API å¹¶ç”Ÿæˆ `.exe`

### 4. å®‰è£… Tauri CLI (å¯é€‰)
```bash
pnpm add -D @tauri-apps/cli
```

---

## ğŸ“‚ ç¬¬äºŒé˜¶æ®µï¼šé¡¹ç›®åˆå§‹åŒ–

### 1. åˆ›å»ºé¡¹ç›®
```bash
pnpm create tauri-app
```

### 2. æ¨èé…ç½®
| é¡¹ç›® | é€‰æ‹© |
|------|------|
| Project Name | smota-tool |
| Frontend Language | TypeScript |
| Package Manager | pnpm |
| UI Template | Vue |
| UI Flavor | Vite |

### 3. é¡¹ç›®ç›®å½•ç»“æ„
```
smota-tool/
â”œâ”€â”€ src-tauri/           # Rust åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs
â”‚   â”‚   â”œâ”€â”€ serial/      # ä¸²å£ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ smota/       # SMOTA åè®®æ¨¡å—
â”‚   â”‚   â””â”€â”€ python/      # Python è„šæœ¬æ‰§è¡Œæ¨¡å—
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â””â”€â”€ tauri.conf.json
â”œâ”€â”€ src/                 # Vue å‰ç«¯
â”‚   â”œâ”€â”€ components/      # ç»„ä»¶
â”‚   â”œâ”€â”€ views/           # è§†å›¾
â”‚   â”œâ”€â”€ stores/          # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â””â”€â”€ package.json
```

---

## âš™ï¸ ç¬¬ä¸‰é˜¶æ®µï¼šRust åç«¯é€»è¾‘

### 1. æ ¸å¿ƒä¾èµ–é…ç½®
åœ¨ `src-tauri/Cargo.toml` ä¸­æ·»åŠ ï¼š

```toml
[dependencies]
tauri = { version = "2", features = ["shell-open"] }
serialport = "4.3.0"           # ä¸²å£æ“ä½œ
pyo3 = { version = "0.20", features = ["auto-initialize"] } # Python åµŒå…¥
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
tokio = { version = "1", features = ["full"] } # å¼‚æ­¥æ”¯æŒ
futures = "0.3"
thiserror = "1.0"
```

### 2. ä¸²å£ç®¡ç†æ¨¡å—
```rust
// src-tauri/src/serial/mod.rs

pub struct SerialManager {
    port: Option<Box<dyn SerialPort>>,
    reader: Option<Box<dyn Read>>,
}

impl SerialManager {
    /// è·å–å¯ç”¨ä¸²å£åˆ—è¡¨
    pub fn list_ports() -> Result<Vec<SerialPortInfo>, Box<dyn Error>> {
        serialport::available_ports()
    }

    /// æ‰“å¼€ä¸²å£
    pub fn open(&mut self, port_name: &str, baud_rate: u32) -> Result<(), SerialError> {
        // å®ç°æ‰“å¼€é€»è¾‘
    }

    /// å‘é€æ•°æ®
    pub fn write(&mut self, data: &[u8]) -> Result<usize, SerialError> {
        // å®ç°å‘é€é€»è¾‘
    }

    /// è¯»å–æ•°æ®ï¼ˆå¼‚æ­¥ï¼‰
    pub fn read(&mut self, buffer: &mut [u8]) -> Result<usize, SerialError> {
        // å®ç°è¯»å–é€»è¾‘
    }
}
```

### 3. Python è„šæœ¬æ‰§è¡Œæ¨¡å—
```rust
// src-tauri/src/python/executor.rs

use pyo3::Python;

pub struct ScriptExecutor;

impl ScriptExecutor {
    /// æ‰§è¡Œæ ¡éªŒè„šæœ¬
    pub fn run_checksum(data_hex: Vec<u8>, script: &str) -> Result<Vec<u8>, String> {
        Python::with_gil(|py| {
            // å®šä¹‰å¯ç”¨çš„å‡½æ•°
            let locals = [
                ("calculate", py.get_function_bound("calculate"))
            ];
            // æ‰§è¡Œè„šæœ¬å¹¶è¿”å›ç»“æœ
        })
    }
}
```

---

## ğŸ¨ ç¬¬å››é˜¶æ®µï¼šå‰ç«¯ UI è®¾è®¡

### 1. æŠ€æœ¯æ ˆæ¨è

| ç»„ä»¶ç±»å‹ | æ¨èæ–¹æ¡ˆ | è¯´æ˜ |
|----------|----------|------|
| **åŸºç¡€ UI åº“** | **Naive UI** | Vue 3 ç”Ÿæ€ï¼Œä¸­æ–‡æ–‡æ¡£å®Œå–„ï¼Œä¸»é¢˜å®šåˆ¶çµæ´» |
| **ç¼–è¾‘å™¨** | **Monaco Editor** | VS Code åŒæ¬¾ï¼Œæ”¯æŒè¯­æ³•é«˜äº® |
| **å›¾æ ‡** | **@iconify/vue** | æ”¯æŒå¤šç§å›¾æ ‡é›† |
| **å¸ƒå±€** | **Tailwind CSS** | å¿«é€Ÿå®ç°å“åº”å¼å’Œæ·±è‰²æ¨¡å¼ |
| **å¯è§†åŒ–** | **ECharts** | å®æ—¶å±•ç¤ºæ•°æ®æ³¢å½¢ |
| **çŠ¶æ€ç®¡ç†** | **Pinia** | Vue 3 å®˜æ–¹æ¨èçŠ¶æ€ç®¡ç† |

### 2. UI å¸ƒå±€è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [è®¾å¤‡è¿æ¥] COM3 â–¼ 115200 â–¼ [è¿æ¥] [æ–­å¼€]          ğŸŒ™ æ·±è‰²æ¨¡å¼ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  ä¸²å£è®¾ç½® â”‚  â”‚            Monaco Editor åŒºåŸŸ                â”‚  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚     def calculate(data_hex_list):           â”‚  â”‚
â”‚  COMç«¯å£  â”‚  â”‚         checksum = sum(data_hex_list) & 0xFF â”‚  â”‚
â”‚  æ³¢ç‰¹ç‡   â”‚  â”‚         return [checksum]                    â”‚  â”‚
â”‚  æ•°æ®ä½   â”‚  â”‚                                             â”‚  â”‚
â”‚  åœæ­¢ä½   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  æ ¡éªŒä½   â”‚                                                  â”‚
â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚  å‘é€æŒ‰é’®   â”‚ â”‚  å¾ªç¯å‘é€   â”‚ â”‚  æ¸…é™¤è®°å½•   â”‚  â”‚
â”‚  å‘é€å†å² â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                                                  â”‚
â”‚  [å‘½ä»¤1]  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  [å‘½ä»¤2]  â”‚  â”‚  æ•°æ®æ¥æ”¶åŒº                                  â”‚  â”‚
â”‚  [...]    â”‚  â”‚  [12:34:56] RX: AA BB CC DD ...              â”‚  â”‚
â”‚          â”‚  â”‚  [12:34:57] TX: 01 02 03 ...                  â”‚  â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  çŠ¶æ€æ :  å·²è¿æ¥ | å‘é€: 128 | æ¥æ”¶: 256 | é”™è¯¯: 0           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶å | åŠŸèƒ½ |
|--------|------|
| `SerialPanel` | ä¸²å£è¿æ¥ä¸é…ç½® |
| `ScriptEditor` | Monaco Editor é›†æˆ |
| `DataMonitor` | å®æ—¶æ•°æ®æ¥æ”¶ä¸æ˜¾ç¤º |
| `CommandHistory` | å‘é€å†å²è®°å½• |
| `SmotaUpgrade` | OTA å‡çº§ç•Œé¢ |

---

## ğŸ ç¬¬äº”é˜¶æ®µï¼šPython è„šæœ¬é›†æˆ

### 1. ç”¨æˆ·è„šæœ¬æ¥å£è§„èŒƒ

```python
# checksum.py - æ ¡éªŒè®¡ç®—è„šæœ¬

def calculate(data_hex_list):
    """
    è®¡ç®—æ ¡éªŒå€¼
    @param data_hex_list: list[int] ä¼ å…¥çš„å­—èŠ‚æ•°ç»„ (0-255)
    @return: list[int] è®¡ç®—åçš„å­—èŠ‚æ•°ç»„æˆ–æ ¡éªŒä½åˆ—è¡¨
    """
    checksum = sum(data_hex_list) & 0xFF
    return [checksum]

# å¯é€‰: é¢„å¤„ç†å‡½æ•°
def preprocess(data_hex_list):
    """æ•°æ®é¢„å¤„ç†ï¼Œåœ¨ calculate ä¹‹å‰è°ƒç”¨"""
    return data_hex_list

# å¯é€‰: åå¤„ç†å‡½æ•°
def postprocess(result):
    """ç»“æœåå¤„ç†"""
    return result
```

### 2. å·¥å…·äº¤äº’æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ UI     â”‚â”€â”€â”€â”€â–¶â”‚   Rust åç«¯   â”‚â”€â”€â”€â”€â–¶â”‚  Python è„šæœ¬  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚                     â”‚
                            â”‚  æ‰§è¡Œè„šæœ¬            â”‚
                            â–¼                     â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚   ä¸²å£å‘é€    â”‚â—€â”€â”€â”€â”€â”‚  è¿”å›ç»“æœ     â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. è„šæœ¬æ²™ç®±å®‰å…¨

```rust
// é™åˆ¶ Python è„šæœ¬å¯è®¿é—®çš„æ¨¡å—
Python::with_gil(|py| {
    let allowed_modules = ["math", "functools"];
    // åªå¯¼å…¥å…è®¸çš„æ¨¡å—ï¼Œé˜²æ­¢æ¶æ„ä»£ç æ‰§è¡Œ
});
```

---

## ğŸ”§ ç¬¬å…­é˜¶æ®µï¼šSMOTA åè®®é›†æˆ

### 1. OTA å‡çº§ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SMOTA å›ºä»¶å‡çº§                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é€‰æ‹©å›ºä»¶åŒ…:  [v1.2.3.bin]  ğŸ“‚ æµè§ˆ                               â”‚
â”‚                                                                 â”‚
â”‚  å›ºä»¶ä¿¡æ¯:                                                       â”‚
â”‚  â”œâ”€ ç‰ˆæœ¬:    v1.2.3                                              â”‚
â”‚  â”œâ”€ å¤§å°:    256 KB                                              â”‚
â”‚  â”œâ”€ CRC32:   0xA1B2C3D4                                          â”‚
â”‚  â””â”€ è®¾å¤‡ç±»å‹: SMOTA_V1                                            â”‚
â”‚                                                                 â”‚
â”‚  ç›®æ ‡è®¾å¤‡:  COM3                                                  â”‚
â”‚                                                                 â”‚
â”‚  å‡çº§é€‰é¡¹:                                                       â”‚
â”‚  â˜‘ å‡çº§å‰å¤‡ä»½                                                   â”‚
â”‚  â˜‘ å‡çº§åæ ¡éªŒ                                                   â”‚
â”‚  â˜ å¼ºåˆ¶å‡çº§ï¼ˆè·³è¿‡ç‰ˆæœ¬æ£€æŸ¥ï¼‰                                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       å¼€å§‹å‡çº§              â”‚  â”‚          å–æ¶ˆ              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  è¿›åº¦: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 75%                             â”‚
â”‚  çŠ¶æ€: æ­£åœ¨å†™å…¥ç¬¬ 192 / 256 å—...                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. å‡çº§æµç¨‹

```rust
// src-tauri/src/smota/upgrade.rs

pub enum SmotaPhase {
    Connect,      // è¿æ¥è®¾å¤‡
    Identify,     // è¯†åˆ«è®¾å¤‡
    Erase,        // æ“¦é™¤é—ªå­˜
    Write,        // å†™å…¥å›ºä»¶
    Verify,       // æ ¡éªŒå›ºä»¶
    Reboot,       // é‡å¯è®¾å¤‡
    Complete,     // å®Œæˆ
}

pub struct UpgradeProgress {
    pub phase: SmotaPhase,
    pub percent: u8,
    pub current_block: u32,
    pub total_blocks: u32,
    pub status_message: String,
}
```

### 3. äº‹ä»¶é€šçŸ¥

```rust
// é€šè¿‡ Tauri äº‹ä»¶é€šçŸ¥å‰ç«¯è¿›åº¦
window.emit("smota-phase-change", phase)?;
window.emit("smota-progress", progress)?;
window.emit("smota-error", error_message)?;
window.emit("smota-complete", result)?;
```

---

## ğŸ“¦ ç¬¬ä¸ƒé˜¶æ®µï¼šæ‰“åŒ…ä¸å‘å¸ƒ

### 1. æ„å»ºå‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼è¿è¡Œ
pnpm tauri dev

# æ„å»ºç”Ÿäº§ç¯å¢ƒå®‰è£…åŒ…
pnpm tauri build
```

### 2. å®‰è£…åŒ…ç”Ÿæˆä½ç½®

| å¹³å° | ä½ç½® |
|------|------|
| Windows MSI | `src-tauri/target/release/bundle/msi/` |
| Windows EXE | `src-tauri/target/release/bundle/nsis/` |

### 3. Windows å®‰è£…é…ç½® (tauri.conf.json)

```json
{
  "bundle": {
    "windows": {
      "certificateThumbprint": "YOUR_THUMBPRINT",
      "digestAlgorithm": "sha256",
      "signParams": {}
    },
    "nsis": {
      "installMode": "currentUser",
      "uninstallDisplayName": "SMOTA Tool",
      "include": "scripts/installer.nsh"
    }
  }
}
```

### 4. è‡ªåŠ¨æ›´æ–°

```toml
[dependencies]
tauri-plugin-updater = "2"
```

```rust
// æ£€æŸ¥æ›´æ–°
use tauri_plugin_updater::TauriUpdater;

let updater = TauriUpdater::new().build();
match updater.check().await {
    Ok(Some(update)) => {
        // å‘ç°æ–°ç‰ˆæœ¬ï¼Œæç¤ºç”¨æˆ·æ›´æ–°
    }
    _ => {}
}
```

---

## ğŸ’¡ å¼€å‘å»ºè®® (Best Practices)

### 1. æ¶æ„åŸåˆ™
- **UI åªè´Ÿè´£å±•ç¤ºå’Œç”¨æˆ·è¾“å…¥**
- **å¤æ‚çš„äºŒè¿›åˆ¶è®¡ç®—å’Œä¸²å£ IO æ”¾åœ¨ Rust ä¾§**
- **Python è„šæœ¬ä¸ä¸»ç¨‹åºéš”ç¦»ï¼Œé€šè¿‡æ¥å£é€šä¿¡**

### 2. ä¸²å£ç®¡ç†
```rust
// è®¾å¤‡çƒ­æ’æ‹”å¤„ç†
serialport::available_ports() // å®šæœŸæ£€æŸ¥å¯ç”¨ç«¯å£å˜åŒ–

// è‡ªåŠ¨é‡è¿æœºåˆ¶
if let Err(e) = port.write(data) {
    window.emit("device-disconnected", e.to_string())?;
}
```

### 3. æ€§èƒ½ä¼˜åŒ–
- é«˜é¢‘æ•°æ®æ¥æ”¶ä½¿ç”¨**ç¼“å†²åŒº**ï¼Œé¿å…é¢‘ç¹æ›´æ–° DOM
- å¤§æ–‡ä»¶ä¼ è¾“ä½¿ç”¨**åˆ†å—å¤„ç†**
- é•¿æ—¶é—´è¿è¡Œä½¿ç”¨**å†…å­˜æ± **å‡å°‘åˆ†é…

### 4. å¼‚å¸¸å¤„ç†
- ä¸²å£æ’å…¥/æ‹”å‡ºæ˜¯é«˜é¢‘æ“ä½œï¼Œéœ€åœ¨ Rust ä¸­å¤„ç† `Panics`
- é€šè¿‡ Tauri äº‹ä»¶é€šçŸ¥ç”¨æˆ·è®¾å¤‡çŠ¶æ€å˜åŒ–
- æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œæ¢å¤å»ºè®®

### 5. å®‰å…¨è€ƒè™‘
- Python è„šæœ¬æœ¬åœ°æ‰§è¡Œéœ€æ·»åŠ **æ²™ç®±é™åˆ¶**
- æé†’ç”¨æˆ·æ³¨æ„å¤–éƒ¨è„šæœ¬æ¥æº
- å›ºä»¶åŒ…éªŒè¯ CRC32 å’Œæ•°å­—ç­¾å

### 6. æ¨èçš„å¼€å‘æµç¨‹

```
Phase 1: åŸºç¡€ä¸²å£é€šä¿¡ (2-3 å¤©)
    â†“
Phase 2: Python è„šæœ¬é›†æˆ (2-3 å¤©)
    â†“
Phase 3: SMOTA åè®®å®ç° (3-4 å¤©)
    â†“
Phase 4: UI ç¾åŒ–ä¸ä¼˜åŒ– (2-3 å¤©)
    â†“
Phase 5: æ‰“åŒ…æµ‹è¯•ä¸å‘å¸ƒ (1-2 å¤©)
```

---

## ğŸ“š å‚è€ƒèµ„æº

| èµ„æº | é“¾æ¥ |
|------|------|
| Tauri å®˜æ–¹æ–‡æ¡£ | https://tauri.app/ |
| Rust Serialport åº“ | https://docs.rs/serialport/ |
| PyO3 (Rust & Python äº¤äº’) | https://pyo3.rs/ |
| Naive UI ç»„ä»¶åº“ | https://www.naiveui.com/ |
| Monaco Editor | https://microsoft.github.io/monaco-editor/ |
| ECharts å›¾è¡¨åº“ | https://echarts.apache.org/ |

---

## ğŸ“ ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹å†…å®¹ |
|------|------|----------|
| v1.0 | 2025-01-30 | åˆå§‹ç‰ˆæœ¬ |